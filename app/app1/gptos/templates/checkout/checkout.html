{% extends 'base.html' %}
{% load static %}
{% block title %}Thanh toán{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/checkout.css' %}">

<div class="checkout-container">
  <h2 class="page-title">Thanh toán</h2>

  <div class="checkout-grid">
    <!-- Cột trái: Tóm tắt đơn -->
    <div class="order-summary">
      <h3>Tóm tắt đơn</h3>
      <ul>
        {% for row in items %}
        <li>
          <span class="product-name">{{ row.product.name }}</span>
          <span class="product-qty">x {{ row.qty }}</span>
          <span class="product-price">{{ row.subtotal|floatformat:0 }}₫</span>
        </li>
        {% endfor %}
      </ul>
      <p class="total"><strong>Tạm tính:</strong> {{ subtotal|floatformat:0 }}₫</p>
    </div>

    <!-- Cột phải: Thông tin giao hàng -->
    <div class="shipping-form">
      <h3>Thông tin giao hàng</h3>
      <form method="post">
        {% csrf_token %}
        <div class="form-grid">
          <div class="form-group">
            <label for="id_name">Họ và tên</label>
            {{ form.name }}
          </div>
          <div class="form-group">
            <label for="id_phone">Số điện thoại</label>
            {{ form.phone }}
          </div>
          <div class="form-group full-width">
            <label for="id_address_line">Địa chỉ</label>
            {{ form.address_line }}
          </div>
          <div class="form-group">
            <label for="id_city">Thành phố</label>
            {{ form.city }}
          </div>
          <div class="form-group">
            <label for="id_district">Quận/Huyện</label>
            {{ form.district }}
          </div>
          <div class="form-group">
            <label for="id_postal_code">Mã bưu điện</label>
            {{ form.postal_code }}
          </div>
          <div class="form-group full-width">
            <label for="id_note">Ghi chú</label>
            {{ form.note }}
          </div>
        </div>

        <button type="submit" class="btn-order">Đặt hàng (COD)</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

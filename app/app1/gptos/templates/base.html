{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Nội Thất Đẹp{% endblock %}</title>

  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'css/reset.css' %}">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  {% block extra_head %}{% endblock %}
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-top">
        <div class="logo">
          <h1><a href="{% url 'home' %}">NỘI THẤT ĐẸP</a></h1>
        </div>

        <!-- Actions (Tìm kiếm + Giỏ hàng + Người dùng) -->
        <div class="header-actions">
          <!-- Search -->
          <form action="{% url 'products' %}" method="get" class="search-box">
            <input type="text" name="search" placeholder="Tìm kiếm sản phẩm..." value="{{ request.GET.search }}">
            <button type="submit"><i class="fas fa-search"></i></button>
          </form>
          <!-- Cart -->
          <div class="cart-icon">
            <a href="{% url 'view_cart' %}">
                <i class="fa fa-shopping-cart"></i>
            </a>
          </div>

          <!-- User -->
            <div class="user-menu">
            {% if request.user.is_authenticated %}
                <div class="dropdown">
                <button class="user-dropdown-btn" onclick="toggleDropdown(event)">
                    <i class="fa fa-user-circle"></i>
                    <span>Xin chào, {{ request.user.username }}</span>
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" id="userDropdown">
                    <a href="{% url 'my_orders' %}">
                        <i class="fa fa-box"></i> Đơn Mua
                    </a>
                    <a href="{% url 'logout' %}">
                        <i class="fa fa-sign-out-alt"></i> Đăng xuất
                    </a>
                </div>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="auth-link">Đăng nhập</a>
                <span class="divider">|</span>
                <a href="{% url 'register' %}" class="auth-link">Đăng ký</a>
            {% endif %}
            </div>
        </div>
      </div>

      <!-- Navigation -->
      <nav class="main-nav">
        <ul class="nav-menu">
          <li><a href="{% url 'home' %}">Trang Chủ</a></li>
          <li><a href="{% url 'products' %}">Sản Phẩm</a></li>
          <li><a href="{% url 'about' %}">Giới Thiệu</a></li>
          <li><a href="{% url 'contact' %}">Liên Hệ</a></li>
          {% comment %} <li><a href="{% url 'view_cart' %}">Giỏ Hàng</a></li> {% endcomment %}
        </ul>
      </nav>
    </div>
  </header>

  <!-- Messages -->
  <div class="container">
    {% if messages %}
      <div class="messages">
        {% for m in messages %}
          <div class="alert {{ m.tags }}">{{ m }}</div>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- Main Content -->
  <main class="container">
    {% block content %}{% endblock %}
  </main>
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>NỘI THẤT ĐẸP</h3>
                    <p>Chuyên cung cấp nội thất chất lượng cao, thiết kế hiện đại cho không gian sống hoàn hảo.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Liên Kết</h4>
                    <ul>
                        <li><a href="{% url 'home' %}">Trang Chủ</a></li>
                        <li><a href="{% url 'products' %}">Sản Phẩm</a></li>
                        <li><a href="{% url 'about' %}">Giới Thiệu</a></li>
                        <li><a href="{% url 'contact' %}">Liên Hệ</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Dịch Vụ</h4>
                    <ul>
                        <li><a href="#">Thiết Kế Nội Thất</a></li>
                        <li><a href="#">Giao Hàng Toàn Quốc</a></li>
                        <li><a href="#">Bảo Hành 2 Năm</a></li>
                        <li><a href="#">Hỗ Trợ 24/7</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Liên Hệ</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Đường ABC, Quận 1, TP.HCM</li>
                        <li><i class="fas fa-phone"></i> 0123 456 789</li>
                        <li><i class="fas fa-envelope"></i> info@noithatdep.com</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Nội Thất Đẹp. Tất cả quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>
</body>
</html>


  <!-- JS -->
  <script src="{% static 'js/app.js' %}"></script>
      <script>
  function toggleDropdown(event) {
    event.stopPropagation();
    const dropdown = document.getElementById("userDropdown");
    dropdown.classList.toggle("show");
  }

  // Đóng khi click ra ngoài
  window.onclick = function(e) {
    if (!e.target.closest('.dropdown')) {
      const dropdown = document.getElementById("userDropdown");
      if (dropdown) dropdown.classList.remove("show");
    }
  }
  </script>
  {% block extra_js %}{% endblock %}
</body>
</html>
